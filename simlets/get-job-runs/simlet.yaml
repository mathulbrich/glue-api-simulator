simlet: get-job-runs

request:  
  - method: POST
  - uriPath: /
  - where: header
    named: "x-amz-target"
    contains: "AWSGlue.GetJobRuns"

JobName:
  is: parameter
  from: body
  element: .JobName

JobRuns:  
  is: parameter
  from: kvStore
  named: start-job-runs

JobRunsData:
  is: parameter
  from: constant
  eval: return JobRuns.get(JobName)

JobRunExists:
  is: parameter
  from: constant
  eval: return JobRuns.containsKey(JobName)

responses:
  - when:
      request:
        - where: parameter
          named: JobRunExists
          equals: false
    from: template
    headers:
      - "Content-Type: application/json"
    status: 200
    body: |+
      {
        "JobRuns": []
      }

  - from: template
    status: 200
    headers:
      - "Content-Type: application/json"
    body: |+
      {
        "JobRuns": [
          {
            "Id": "${JobRunsData.JobRunId}",
            "JobName": "${JobRunsData.JobName}",
            "JobRunState": "SUCCEEDED"
          }
        ]
      }
